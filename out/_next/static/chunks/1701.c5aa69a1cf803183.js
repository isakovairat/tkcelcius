"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1701],{1701:function(i,e,t){t.d(e,{LinkInstance:function(){return LinkInstance}});var n=t(1457);function setLinkFrequency(i,e){var t;let s=((t=i.map(i=>i.id)).sort((i,e)=>i-e),t.join("_")),l=e.get(s);return void 0===l&&(l=(0,n.sZ)(),e.set(s,l)),l}let LinkInstance=class LinkInstance{constructor(i){this.container=i,this._drawLinkLine=(i,e)=>{let t=i.options.links;if(!t?.enable)return;let s=this.container,l=s.actualOptions,a=e.destination,o=i.getPosition(),r=a.getPosition(),c=e.opacity;s.canvas.draw(e=>{let d;let k=i.options.twinkle?.lines;if(k?.enable){let i=k.frequency,e=(0,n.tX)(k.color),t=(0,n.sZ)()<i;t&&e&&(d=e,c=(0,n.Gu)(k.opacity))}if(!d){let e=void 0!==t.id?s.particles.linksColors.get(t.id):s.particles.linksColor;d=(0,n.BE)(i,a,e)}if(!d)return;let y=i.retina.linksWidth??0,f=i.retina.linksDistance??0,{backgroundMask:h}=l;!function(i){let e=!1,{begin:t,end:s,maxDistance:l,context:a,canvasSize:o,width:r,backgroundMask:c,colorLine:d,opacity:k,links:y}=i;if((0,n.Sp)(t,s)<=l)(0,n.pS)(a,t,s),e=!0;else if(y.warp){let i,r;let c={x:s.x-o.width,y:s.y},d=(0,n.oW)(t,c);if(d.distance<=l){let e=t.y-d.dy/d.dx*t.x;i={x:0,y:e},r={x:o.width,y:e}}else{let e={x:s.x,y:s.y-o.height},a=(0,n.oW)(t,e);if(a.distance<=l){let e=t.y-a.dy/a.dx*t.x,n=-e/(a.dy/a.dx);i={x:n,y:0},r={x:n,y:o.height}}else{let e={x:s.x-o.width,y:s.y-o.height},a=(0,n.oW)(t,e);if(a.distance<=l){let e=t.y-a.dy/a.dx*t.x,n=-e/(a.dy/a.dx);r={x:(i={x:n,y:e}).x+o.width,y:i.y+o.height}}}}i&&r&&((0,n.pS)(a,t,i),(0,n.pS)(a,s,r),e=!0)}if(!e)return;a.lineWidth=r,c.enable&&(a.globalCompositeOperation=c.composite),a.strokeStyle=(0,n.iz)(d,k);let{shadow:f}=y;if(f.enable){let i=(0,n.tX)(f.color);i&&(a.shadowBlur=f.blur,a.shadowColor=(0,n.iz)(i))}a.stroke()}({context:e,width:y,begin:o,end:r,maxDistance:f,canvasSize:s.canvas.size,links:t,backgroundMask:h,colorLine:d,opacity:c})})},this._drawLinkTriangle=(i,e,t)=>{let s=i.options.links;if(!s?.enable)return;let l=s.triangles;if(!l.enable)return;let a=this.container,o=a.actualOptions,r=e.destination,c=t.destination,d=l.opacity??(e.opacity+t.opacity)*.5;d<=0||a.canvas.draw(e=>{let t=i.getPosition(),k=r.getPosition(),y=c.getPosition(),f=i.retina.linksDistance??0;if((0,n.Sp)(t,k)>f||(0,n.Sp)(y,k)>f||(0,n.Sp)(y,t)>f)return;let h=(0,n.tX)(l.color);if(!h){let e=void 0!==s.id?a.particles.linksColors.get(s.id):a.particles.linksColor;h=(0,n.BE)(i,r,e)}h&&function(i){let{context:e,pos1:t,pos2:s,pos3:l,backgroundMask:a,colorTriangle:o,opacityTriangle:r}=i;e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(s.x,s.y),e.lineTo(l.x,l.y),e.closePath(),a.enable&&(e.globalCompositeOperation=a.composite),e.fillStyle=(0,n.iz)(o,r),e.fill()}({context:e,pos1:t,pos2:k,pos3:y,backgroundMask:o.backgroundMask,colorTriangle:h,opacityTriangle:d})})},this._drawTriangles=(i,e,t,n)=>{let s=t.destination;if(!(i.links?.triangles.enable&&s.options.links?.triangles.enable))return;let l=s.links?.filter(i=>{let e=this._getLinkFrequency(s,i.destination);return s.options.links&&e<=s.options.links.frequency&&n.findIndex(e=>e.destination===i.destination)>=0});if(l?.length)for(let n of l){let l=n.destination,a=this._getTriangleFrequency(e,s,l);a>i.links.triangles.frequency||this._drawLinkTriangle(e,t,n)}},this._getLinkFrequency=(i,e)=>setLinkFrequency([i,e],this._freqs.links),this._getTriangleFrequency=(i,e,t)=>setLinkFrequency([i,e,t],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(i,e){let{links:t,options:n}=e;if(!t?.length)return;let s=t.filter(i=>n.links&&(n.links.frequency>=1||this._getLinkFrequency(e,i.destination)<=n.links.frequency));for(let i of s)this._drawTriangles(n,e,i,s),i.opacity>0&&(e.retina.linksWidth??0)>0&&this._drawLinkLine(e,i)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(i){if(i.links=[],!i.options.links)return;let e=this.container.retina.pixelRatio,{retina:t}=i,{distance:n,width:s}=i.options.links;t.linksDistance=n*e,t.linksWidth=s*e}particleDestroyed(i){i.links=[]}}}}]);