"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9369],{9369:function(e,t,i){i.d(t,{Bubbler:function(){return Bubbler}});var b=i(1457),l=i(8757);function calculateBubbleValue(e,t,i,l){if(t>=i){let o=e+(t-i)*l;return(0,b.uZ)(o,e,t)}if(t<i){let o=e-(i-t)*l;return(0,b.uZ)(o,t,e)}}let o="bubble";let Bubbler=class Bubbler extends b.L8{constructor(e){super(e),this._clickBubble=()=>{let e=this.container,t=e.actualOptions,i=e.interactivity.mouse.clickPosition,l=t.interactivity.modes.bubble;if(!l||!i)return;e.bubble||(e.bubble={});let o=e.retina.bubbleModeDistance;if(!o||o<0)return;let a=e.particles.quadTree.queryCircle(i,o,e=>this.isEnabled(e)),{bubble:u}=e;for(let t of a){if(!u.clicking)continue;t.bubble.inRange=!u.durationEnd;let a=t.getPosition(),n=(0,b.Sp)(a,i),r=(new Date().getTime()-(e.interactivity.mouse.clickTime??0))/b.X5;r>l.duration&&(u.durationEnd=!0),r>2*l.duration&&(u.clicking=!1,u.durationEnd=!1);let s={bubbleObj:{optValue:e.retina.bubbleModeSize,value:t.bubble.radius},particlesObj:{optValue:(0,b.KI)(t.options.size.value)*e.retina.pixelRatio,value:t.size.value},type:"size"};this._process(t,n,r,s);let c={bubbleObj:{optValue:l.opacity,value:t.bubble.opacity},particlesObj:{optValue:(0,b.KI)(t.options.opacity.value),value:t.opacity?.value??1},type:"opacity"};this._process(t,n,r,c),!u.durationEnd&&n<=o?this._hoverBubbleColor(t,n):delete t.bubble.color}},this._hoverBubble=()=>{let e=this.container,t=e.interactivity.mouse.position,i=e.retina.bubbleModeDistance;if(!i||i<0||!t)return;let l=e.particles.quadTree.queryCircle(t,i,e=>this.isEnabled(e));for(let o of l){o.bubble.inRange=!0;let l=o.getPosition(),a=(0,b.Sp)(l,t),u=1-a/i;a<=i?u>=0&&e.interactivity.status===b.Wt&&(this._hoverBubbleSize(o,u),this._hoverBubbleOpacity(o,u),this._hoverBubbleColor(o,u)):this.reset(o),e.interactivity.status===b.aM&&this.reset(o)}},this._hoverBubbleColor=(e,t,i)=>{let l=this.container.actualOptions,o=i??l.interactivity.modes.bubble;if(o){if(!e.bubble.finalColor){let t=o.color;if(!t)return;let i=(0,b.wA)(t);e.bubble.finalColor=(0,b.lN)(i)}if(e.bubble.finalColor){if(o.mix){e.bubble.color=void 0;let i=e.getFillColor();e.bubble.color=i?(0,b.lC)((0,b.oc)(i,e.bubble.finalColor,1-t,t)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}}},this._hoverBubbleOpacity=(e,t,i)=>{let l=this.container,o=l.actualOptions,a=i?.opacity??o.interactivity.modes.bubble?.opacity;if(!a)return;let u=e.options.opacity.value,n=e.opacity?.value??1,r=calculateBubbleValue(n,a,(0,b.KI)(u),t);void 0!==r&&(e.bubble.opacity=r)},this._hoverBubbleSize=(e,t,i)=>{let l=this.container,o=i?.size?i.size*l.retina.pixelRatio:l.retina.bubbleModeSize;if(void 0===o)return;let a=(0,b.KI)(e.options.size.value)*l.retina.pixelRatio,u=e.size.value,n=calculateBubbleValue(u,o,a,t);void 0!==n&&(e.bubble.radius=n)},this._process=(e,t,i,b)=>{let l=this.container,o=b.bubbleObj.optValue,a=l.actualOptions,u=a.interactivity.modes.bubble;if(!u||void 0===o)return;let n=u.duration,r=l.retina.bubbleModeDistance,s=b.particlesObj.optValue,c=b.bubbleObj.value,d=b.particlesObj.value??0,p=b.type;if(r&&!(r<0)&&o!==s){if(l.bubble||(l.bubble={}),l.bubble.durationEnd)c&&("size"===p&&delete e.bubble.radius,"opacity"===p&&delete e.bubble.opacity);else if(t<=r){if((c??d)!==o){let t=d-i*(d-o)/n;"size"===p&&(e.bubble.radius=t),"opacity"===p&&(e.bubble.opacity=t)}}else"size"===p&&delete e.bubble.radius,"opacity"===p&&delete e.bubble.opacity}},this._singleSelectorHover=(e,t,i)=>{let l=this.container,o=document.querySelectorAll(t),a=l.actualOptions.interactivity.modes.bubble;a&&o.length&&o.forEach(t=>{let o=l.retina.pixelRatio,u={x:(t.offsetLeft+.5*t.offsetWidth)*o,y:(t.offsetTop+.5*t.offsetHeight)*o},n=.5*t.offsetWidth*o,r="circle"===i.type?new b.Cd(u.x,u.y,n):new b.Ae(t.offsetLeft*o,t.offsetTop*o,t.offsetWidth*o,t.offsetHeight*o),s=l.particles.quadTree.query(r,e=>this.isEnabled(e));for(let i of s){if(!r.contains(i.getPosition()))continue;i.bubble.inRange=!0;let l=a.divs,o=(0,b.iC)(l,t);i.bubble.div&&i.bubble.div===t||(this.clear(i,e,!0),i.bubble.div=t),this._hoverBubbleSize(i,1,o),this._hoverBubbleOpacity(i,1,o),this._hoverBubbleColor(i,1,o)}})},e.bubble||(e.bubble={}),this.handleClickMode=t=>{t===o&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,i){(!e.bubble.inRange||i)&&(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){let e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,void 0!==t.size&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}interact(e){let t=this.container.actualOptions,i=t.interactivity.events,l=i.onHover,a=i.onClick,u=l.enable,n=l.mode,r=a.enable,s=a.mode,c=i.onDiv;u&&(0,b.dB)(o,n)?this._hoverBubble():r&&(0,b.dB)(o,s)?this._clickBubble():(0,b.XD)(o,c,(t,i)=>this._singleSelectorHover(e,t,i))}isEnabled(e){let t=this.container,i=t.actualOptions,l=t.interactivity.mouse,a=(e?.interactivity??i.interactivity).events,{onClick:u,onDiv:n,onHover:r}=a,s=(0,b.wm)(o,n);return(!!s||!!r.enable&&!!l.position||!!u.enable&&!!l.clickPosition)&&((0,b.dB)(o,r.mode)||(0,b.dB)(o,u.mode)||s)}loadModeOptions(e,...t){for(let i of(e.bubble||(e.bubble=new l.x),t))e.bubble.load(i?.bubble)}reset(e){e.bubble.inRange=!1}}}}]);