"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9529],{4632:function(e,a,r){r.d(a,{d:function(){return downloadSvgImage},e:function(){return replaceImageColor},loadImage:function(){return loadImage}});var n=r(1457);let o=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;async function loadImage(e){return new Promise(a=>{e.loading=!0;let r=new Image;e.element=r,r.addEventListener("load",()=>{e.loading=!1,a()}),r.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,(0,n.jl)().error(`${n.gK} loading image: ${e.source}`),a()}),r.src=e.source})}async function downloadSvgImage(e){if("svg"!==e.type){await loadImage(e);return}e.loading=!0;let a=await fetch(e.source);a.ok?e.svgData=await a.text():((0,n.jl)().error(`${n.gK} Image not found`),e.error=!0),e.loading=!1}function replaceImageColor(e,a,r,t){let i=function(e,a,r){let{svgData:t}=e;if(!t)return"";let i=(0,n.vz)(a,r);if(t.includes("fill"))return t.replace(o,()=>i);let l=t.indexOf(">");return`${t.substring(0,l)} fill="${i}"${t.substring(l)}`}(e,r,t.opacity?.value??1),l={color:r,gif:a.gif,data:{...e,svgData:i},loaded:!1,ratio:a.width/a.height,replaceColor:a.replaceColor,source:a.src};return new Promise(a=>{let r=new Blob([i],{type:"image/svg+xml"}),n=URL||window.URL||window.webkitURL||window,o=n.createObjectURL(r),t=new Image;t.addEventListener("load",()=>{l.loaded=!0,l.element=t,a(l),n.revokeObjectURL(o)});let errorHandler=async()=>{n.revokeObjectURL(o);let r={...e,error:!1,loading:!0};await loadImage(r),l.loaded=!0,l.element=r.element,a(l)};t.addEventListener("error",()=>void errorHandler()),t.src=o})}},9529:function(e,a,r){r.d(a,{loadImageShape:function(){return loadImageShape}});var n=r(4632),o=r(1457);async function loadImageShape(e,a=!0){e.loadImage||(e.loadImage=async a=>{if(!a.name&&!a.src)throw Error(`${o.gK} no image source provided`);if(e.images||(e.images=[]),!e.images.find(e=>e.name===a.name||e.source===a.src))try{let o;let t={gif:a.gif??!1,name:a.name??a.src,source:a.src,type:a.src.substring(a.src.length-3),error:!1,loading:!0,replaceColor:a.replaceColor,ratio:a.width&&a.height?a.width/a.height:void 0};if(e.images.push(t),a.gif){let{loadGifImage:e}=await r.e(6320).then(r.bind(r,6320));o=e}else o=a.replaceColor?n.d:n.loadImage;await o(t)}catch{throw Error(`${o.gK} ${a.name??a.src} not found`)}});let{ImagePreloaderPlugin:t}=await r.e(7039).then(r.bind(r,7039)),{ImageDrawer:i}=await r.e(8588).then(r.bind(r,8588)),l=new t(e);await e.addPlugin(l,a),await e.addShape(["image","images"],new i(e),a)}}}]);